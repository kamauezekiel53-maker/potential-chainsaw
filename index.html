<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>She Is The Constellation</title>
<style>
:root{
  --bg:#05060b;
  --card:#0c101a;
  --text:#f2eefc;
  --muted:#aaa7b5;
  --accent1:#ff9aa2;
}
*{box-sizing:border-box;font-family:Poppins,system-ui;}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);}

.card{
  background:linear-gradient(180deg, #0c101a, #07090f);
  border-radius:22px;
  padding:20px;
  margin-top:15px;
}

h1{text-align:center;font-size:28px;}
.subtitle{text-align:center;color:#bfbad3;font-size:15px;margin-bottom:10px;}

.btn{
  border:none;padding:12px 20px;border-radius:30px;font-weight:700;
  background:#1d2332;color:#fff;cursor:pointer;
}

.pink{background:#ffb5c2;color:#22010b;}
.green{background:#24d366;color:#022;}
.gray{background:#1c222f;color:#fff;}

.videoBox{
  width:100%;height:260px;background:#000;border-radius:20px;
  overflow:hidden;position:relative;
}
#videoFrame{width:100%;height:100%;}

.pauseBtn{
  position:absolute;right:16px;bottom:16px;
  background:#222a38;color:#fff;border-radius:30px;
  border:none;padding:10px 16px;font-weight:700;
}

.pageCard{
  background:#0b0f19;border-radius:22px;padding:24px;margin-top:15px;
  min-height:260px;
}
.pageCard h2{font-size:22px;margin-bottom:15px;}
.pageCard p{line-height:1.6;font-size:16px;white-space:pre-line;}

.navRow{display:flex;justify-content:space-between;margin-top:15px;}

.footer{text-align:center;color:#bfbad3;margin-top:20px;font-size:14px;}
.footer span{color:#ff99aa;}
.hidden{display:none;}

input{
  width:100%;padding:12px;border-radius:12px;margin-top:6px;
  background:#0c101a;border:1px solid #111;color:white;
}

@media(max-width:600px){
  .videoBox{height:220px;}
}
</style>
</head>
<body>

<div id="senderView" class="card">
  <h1>Create Your Gift</h1>

  <label>Your Name</label>
  <input id="senderName">

  <label>Her Name</label>
  <input id="receiverName">

  <label>YouTube Link</label>
  <input id="ytLink">

  <label>Her WhatsApp Number</label>
  <input id="waNumber" placeholder="2547xxxxxxx">

  <button class="btn pink" onclick="generateLink()">Generate Gift Link</button>

  <div id="giftLink" style="margin-top:15px;color:#bbb;"></div>
</div>

<div id="receiverView" class="hidden">

  <h1>She Is the Constellation</h1>
  <div class="subtitle">
    Every page is a facet of her ‚Äî light, strength, mystery, and the hush between stars.
  </div>

  <div class="card videoBox">
    <iframe id="videoFrame" allow="autoplay; encrypted-media"></iframe>
    <button id="pauseBtn" class="pauseBtn">‚è∏ Pause</button>
  </div>

  <div class="pageCard">
    <h2 id="pageTitle"></h2>
    <p id="pageBody"></p>

    <div class="navRow">
      <button class="btn gray" onclick="prevPage()">Back</button>
      <button class="btn pink" onclick="nextPage()">Next</button>
    </div>

    <div id="finalButtons" class="hidden" style="text-align:center;margin-top:20px;">
      <a id="waBtn" class="btn green" target="_blank">Send reaction on WhatsApp</a>
      <br><br>
      <button class="btn gray" onclick="restartBook()">Restart</button>
    </div>
  </div>

  <div class="footer">
    Made with love and stars ‚Ä¢ <span>Ezekiel</span>
  </div>

</div>

<script>
const params = new URLSearchParams(location.search);

const pages = [
  {title:"Her Light", text:"She walks like dawn ‚Äî\nsoft, certain,\nimpossible to ignore.\n\nEven the night\nstays a little longer\njust to see her rise."},
  {title:"Her Strength", text:"She carries storms\ninside her heart\nand still blooms each morning\nlike the sky never broke her."},
  {title:"Her Mystery", text:"There is a quiet magic\nin the way she exists ‚Äî\nnot loud,\nnot weak,\njust endless and deep."},
  {title:"Her Gravity", text:"She doesn't chase light.\nShe simply becomes it.\nAnd the universe\nleans toward her."},
  {title:"Final Message", text:"This is not about us.\nIt is about you ‚Äî\nthe way you turn ordinary moments\ninto constellations.\n\nI will always look up\nand find you there.\n\n‚Äî Created by Ezekiel"}
];

let pageIndex = 0;

function generateLink(){
  const f = senderName.value.trim();
  const t = receiverName.value.trim();
  const y = ytLink.value.trim();
  const n = waNumber.value.trim();

  if(!f||!t){ giftLink.innerText="Fill all names.";return; }

  const link = location.origin+location.pathname+
    `?from=${encodeURIComponent(f)}&to=${encodeURIComponent(t)}&yt=${encodeURIComponent(y)}&num=${encodeURIComponent(n)}`;

  giftLink.innerHTML = `<a href="${link}" target="_blank">${link}</a>`;
}

function extractYT(url){
  if(!url) return "";
  if(url.includes("youtu.be")) return url.split("/").pop();
  if(url.includes("watch?v=")) return url.split("watch?v=")[1].split("&")[0];
  return url;
}

function loadReceiver(){
  const from = params.get("from");
  if(!from) return;

  senderView.classList.add("hidden");
  receiverView.classList.remove("hidden");

  const yt = extractYT(params.get("yt")||"");
  if(yt){
    videoFrame.src=`https://www.youtube.com/embed/${yt}?autoplay=1&mute=1&controls=0`;
  }

  showPage();
}

function showPage(){
  pageTitle.innerText = pages[pageIndex].title;
  pageBody.innerText = pages[pageIndex].text;

  if(pageIndex === pages.length-1){
    finalButtons.classList.remove("hidden");
  } else {
    finalButtons.classList.add("hidden");
  }

  const num = params.get("num");
  if(num){
    waBtn.href=`https://wa.me/${num}?text=${encodeURIComponent("I saw your gift üíñ")}`;
  }
}

function nextPage(){
  if(pageIndex < pages.length-1){ pageIndex++; showPage(); }
}
function prevPage(){
  if(pageIndex > 0){ pageIndex--; showPage(); }
}
function restartBook(){
  pageIndex = 0; showPage();
}

loadReceiver();
</script>
</body>
</html>